<div class="container mt-4">
    <h2 class="text-center mb-4">All Users</h2>
  
    <!-- Error Message -->
    @if (error()) {
      <div class="alert alert-danger text-center">
        {{ error() }}
      </div>
    }
    <!-- Add New User Button -->
    <a routerLink='/admin/users/add-user'>
        <div class="d-flex justify-content-end">
            <div class="btn btn-success w-25" >Add New User</div>
        </div>
    </a>
    <!-- Admins Table -->
    <h3 class="mt-1 ">Admins</h3>
    <table class="table table-striped table-hover text-center">
      <thead class="table-dark">
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (user of allUsers(); track user._id) {
          @if (user.role === 'admin') {
            <tr>
              <td>{{ user.name }}</td>
              <td>{{ user.email }}</td>
              <td>
                <span class="badge bg-primary">{{ user.role }}</span>
              </td>
              <td>
                <a [routerLink]="['/admin/users', user._id]">
                  <button class="btn btn-info btn-sm mx-1">View</button>
                </a>
                <button class="btn btn-danger btn-sm mx-1" (click)="confirmDelete(user._id)">
                  Delete
                </button>
              </td>
            </tr>
          }
        }
      </tbody>
    </table>
  
    <!-- Users Table -->
    <h3 class="mt-5">Users</h3>
    <table class="mb-5 table table-striped table-hover text-center">
      <thead class="table-dark">
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (user of allUsers(); track user._id) {
          @if (user.role === 'user') {
            <tr>
              <td>{{ user.name }}</td>
              <td>{{ user.email }}</td>
              <td>
                <span class="badge bg-secondary">{{ user.role }}</span>
              </td>
              <td>
                <a [routerLink]="['/admin/users', user._id]">
                  <button class="btn btn-info btn-sm mx-1">View</button>
                </a>
                <button class="btn btn-danger btn-sm mx-1" (click)="confirmDelete(user._id)">
                  Delete
                </button>
              </td>
            </tr>
          }
        }
      </tbody>
    </table>
  
    <!-- Load More Button -->
    <div class="text-center mt-4">
      @if (isLoading()) {
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      } @else if (currentPage <= totalPages()) {
        <button class="btn btn-primary" (click)="loadMore()">Load More</button>
      } @else {
        <p class="text-muted">No more users to load.</p>
      }
    </div>
  
  </div>